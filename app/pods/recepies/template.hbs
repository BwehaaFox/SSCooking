<div class='container is-max-desktop'>
  <div class='content'>
    <Ui::Box>
      <div class='buttons'>
        <Ui::Button @title='Создать' @onClick={{this.create}} />
        <Ui::Button
          @title={{if
            this.recepies.edit_state
            'Закончить редактирование'
            'Редактирование'
          }}
          @onClick={{set
            this.recepies.edit_state
            (not this.recepies.edit_state)
          }}
        />
        {{#if (and this.recepies.has_changes this.recepies.isApp)}}
          <Ui::Button
            @title='Применить изменения'
            @onClick={{this.getChanges}}
          />
        {{/if}}
        <Ui::Button @title='Импорт' @onClick={{this.import}} />
        <Ui::Button
          @title='Экспорт'
          @onClick={{this.system.downloadActualData}}
        />

      </div>

      <Control::TextField @placeholder='Поиск' @onInput={{set this.search}} />

      {{#if this.search}}
        <div class='columns is-multiline'>
          {{#each this.searched_items key='@index' as |recepie|}}
            <div class='column is-one-third'>
              <Ui::Recepie
                @data={{recepie}}
                @onRecepie={{this.openRecepieTree}}
                @edit_mode={{this.recepies.edit_state}}
              />
            </div>
          {{else}}
            Совпадений не найдено
          {{/each}}
        </div>
      {{else}}

        {{#each-in this.grouped_items as |key value|}}
          <article class='panel is-link'>
            <p class='panel-heading'>
              {{key}}
            </p>
            <div class='panel-block'>
              <div class='columns is-multiline' style='flex-grow: 1;'>
                {{#each value key='@index' as |recepie|}}
                  <div class='column is-one-third'>
                    <Ui::Recepie
                      @data={{recepie}}
                      @onRecepie={{this.openRecepieTree}}
                      @edit_mode={{this.recepies.edit_state}}
                    />
                  </div>
                {{/each}}
              </div>
            </div>
          </article>
        {{/each-in}}

      {{/if}}

    </Ui::Box>
  </div>
</div>
{{outlet}}